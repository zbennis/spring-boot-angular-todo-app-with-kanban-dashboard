version: '3'
 
services:

  backend:
    image: openjdk:10-jre-slim
    container_name: todos-springboot-backend
    ports:
      - 2604:2604
    volumes:
      - ./todos-springboot-backend/build/libs/todos-springboot-backend-0.0.1-SNAPSHOT.jar:/application.jar
    command: ["java", "-jar", "application.jar"]
    networks:
      - todos-springboot-backend-network
       
  frontend:
    image: nginx:alpine
    container_name: todo-angular-frontend
    ports: 
      - 4200:80
    depends_on:
      - backend
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./todo-angular-frontend/dist/todo-angular-frontend/:/usr/share/nginx/html
    networks:
      - todo-angular-frontend-network
   
networks:
  todos-springboot-backend-network:
  todo-angular-frontend-network: